<div id="conversation-history" data-controller="conversation" data-conversation-target="history">
  <div class="w-full max-w-md border border-gray-400 rounded-md relative"> 
    <!-- 閉じるボタン -->
    <div class="flex justify-end">
      <button type="button" data-action="conversation#close" class="absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-800">
      ✕
      </button>
    </div>
    <% if @messages.any? %>
      <% @messages.each do |message| %>
        <% if message.is_a?(Post) %>
          <div class="flex justify-end">
            <div class="message-item">
              <p><%= message.content %></p>
              <small class="text-xs text-gray-500"><%= l message.created_at, format: :short %></small>
            </div>
          </div>
        <% elsif message.is_a?(AiResponse) %>
          <div class="flex justify-start">
            <div class="message-item">
              <p><%= message.content %></p>
              <small class="text-xs text-gray-500"><%= l message.created_at, format: :short %></small>
            </div>
          </div>
        <% end %> 
      <% end %>
    <% else %>
      <p>まだ会話履歴はありません。</p>
    <% end %>
  </div>
</div>
